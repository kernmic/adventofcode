import {expect, describe, test} from 'vitest'
import {countSplits} from "./laboratories";

const input = `.......S.......
...............
.......^.......
...............
......^.^......
...............
.....^.^.^.....
...............
....^.^...^....
...............
...^.^...^.^...
...............
..^...^.....^..
...............
.^.^.^.^.^...^.
...............`;
const realInput = `......................................................................S......................................................................
.............................................................................................................................................
......................................................................^......................................................................
.............................................................................................................................................
.....................................................................^.^.....................................................................
.............................................................................................................................................
....................................................................^...^....................................................................
.............................................................................................................................................
...................................................................^.^...^...................................................................
.............................................................................................................................................
..................................................................^.....^.^..................................................................
.............................................................................................................................................
.................................................................^.^.^...^.^.................................................................
.............................................................................................................................................
................................................................^.^.^.^.^.^.^................................................................
.............................................................................................................................................
...............................................................^.^...^.^.^.^.^...............................................................
.............................................................................................................................................
..............................................................^.^.^.^.^...^.^.^..............................................................
.............................................................................................................................................
.............................................................^.^.^.^.^.....^...^.............................................................
.............................................................................................................................................
............................................................^...^...^.^...^.^.^.^............................................................
.............................................................................................................................................
...........................................................^.......^...^.^...^.^.^...........................................................
.............................................................................................................................................
..........................................................^.^.^.....^.^.^...^.^...^..........................................................
.............................................................................................................................................
.........................................................^.^.^.^.....^.^.^.^.^.....^.........................................................
.............................................................................................................................................
........................................................^.^.^.^.^.^.^...^.^...^...^.^........................................................
.............................................................................................................................................
.......................................................^.^.....^.^.^...^.^.....^.^.^.^.......................................................
.............................................................................................................................................
......................................................^.^...^.^.^...^.^.^...^.^.^.^...^......................................................
.............................................................................................................................................
.....................................................^.^.^.....^.....^.....^.^.^.^...^.^.....................................................
.............................................................................................................................................
....................................................^.....^.......^.^.^.^.^.^.^.^...^.^.^....................................................
.............................................................................................................................................
...................................................^.^.^.....^.....^.^.^.^.^.^.^.^.^...^.^...................................................
.............................................................................................................................................
..................................................^...^.^.^...^...^.^.^.^.^.^.^.^...^.^...^..................................................
.............................................................................................................................................
.................................................^.^...^.^.^...^.^.^.^.....^.^.^...^.....^.^.................................................
.............................................................................................................................................
................................................^.^.^.........^.^.^.^.......^.^.^.^.^.^.^.^.^................................................
.............................................................................................................................................
...............................................^.^.^.^.^.^.^.^.^.^.^.^.^.....^.^...^.^...^.^.^...............................................
.............................................................................................................................................
..............................................^.^.^.......^.^...^.^.^.^.^.^...^.....^.^...^.^.^..............................................
.............................................................................................................................................
.............................................^.^.^.....^.^...^...^.^.^.....^.^.^.^.^.^.....^...^.............................................
.............................................................................................................................................
............................................^.^.^.^.^.....^...^.....^.^.^.^.^.^.^.^.^.......^.^.^............................................
.............................................................................................................................................
...........................................^.^.^.^...^.^.^.^...^.....^.....^.......^.^...^.^.^.^.^...........................................
.............................................................................................................................................
..........................................^...^.^.^.^.....^.^.^.^.^.^...^.^.^.^.^.^.^.^...^...^...^..........................................
.............................................................................................................................................
.........................................^.^.^...^...^.^.^.^.^.......^...^...^.^.^.^...^.^.^...^...^.........................................
.............................................................................................................................................
........................................^.^.^.^.^.^.^.^.^.^.^.....^.^.^...^...^.^.^...^...^.^.^.^.^.^........................................
.............................................................................................................................................
.......................................^.^.^.^.^.^.^.^.^...^.....^.....^...^...^.^.....^.^...^.^.^.^.^.......................................
.............................................................................................................................................
......................................^.^.^.^.....^.....^.^.......^.^.^.....^.^.^.^...^.^...^.....^.^.^......................................
.............................................................................................................................................
.....................................^.^...^.^...^.^.^.^.^.^.^.....^...^.^.^.^.^.....^.^.^.^.^.....^...^.....................................
.............................................................................................................................................
....................................^.^.^.^.^...^.....^.^.^.^.^.....^.^.^...^.^.^...^.....^.^...^.^.^.^.^....................................
.............................................................................................................................................
...................................^.^.^.^.....^...^.^.^.^.......^.^.^...^.^.......^...^...^...^.^.^...^.^...................................
.............................................................................................................................................
..................................^.......^...^.^.^.^...^...^...^.^...^.^.^.^.^.^.^.^.^.^...^...^.^.^.^.^.^..................................
.............................................................................................................................................
.................................^.....^.^.^.^...^.^.....^...^.^.^.^...^.....^...^...^.......^.^.^.^.^.....^.................................
.............................................................................................................................................
................................^.^.^.^.^...^.........^.^...^.^.^.^.^.^.^.^.^...^.^.^.^.....^.^...^...^.^...^................................
.............................................................................................................................................
...............................^...^.....^.^...^...^.^.^.^.^.^...^.^.^...^.....^...^.^.^.^...^.^.......^.^.^.^...............................
.............................................................................................................................................
..............................^.^.^.....^.^.......^.^...^.^.....^.^.^.^...^.^.....^.^.^...^.^.^...^.^...^.^.^.^..............................
.............................................................................................................................................
.............................^.^.^.^.^.^.^.^.....^.^.^.^.^.^.^.^...^.^.^.^...^.^.^...^.^...^.^.^.^...^.^.^.^.^.^.............................
.............................................................................................................................................
............................^.^.^...^.......^.^.^.^.^.^.^.^...^.......^.^.^.^.^.^.....^.^.....^.^.^.^.^.^...^.^.^............................
.............................................................................................................................................
...........................^.^.^.^.^.^...^...^.^.^.^.^.^.^.^.....^...^.^.^.^.^...^...^...^.^.^.^.....^...^.^.^...^...........................
.............................................................................................................................................
..........................^.^.^...^.^.^.^.^.^.......^.......^.^.^...^...^.^.^.^.^.^.^...^.....^.^.^.^.^.^.^.^.....^..........................
.............................................................................................................................................
.........................^.....^.......^...^...^.^.^.^...^.^.^.^.^...^.^...^.^.^.^.^.^.^...........^.^.^.....^...^.^.........................
.............................................................................................................................................
........................^...^.^.^.^.^...^.^.^.^.....^.^.^.^.^...^.^.^.^.^.^.^.^.^.^.....^.....^...^.^.^...^.^.^.^...^........................
.............................................................................................................................................
.......................^.^.^...^.^...^...^.^.^.^...^.....^.^.^.^...^.^.^.^.^...^...^.^.^.^...^.^.......^.^.....^.^.^.^.......................
.............................................................................................................................................
......................^.....^.....^.....^.^.^.....^.^.^.^.^.^.^...^.^.^.^.....^.^.^.^.^.^...^.^.^...^.^.....^.^.^.^.^.^......................
.............................................................................................................................................
.....................^.^.^.^.^...^...^...^.......^...^...^...^.^.....^...^.^...^...^...^.^.^.^...^.^.^.^.^.^.^...^.....^.....................
.............................................................................................................................................
....................^.^.^...^.^...^.^...^.^...^.^...^.^.^.^...^.^.^.^.^.^.^.^.^.^.^.^.....^.^.^.^...^.......^...^.^.^...^....................
.............................................................................................................................................
...................^.^.^.^.....^.....^.^...^.^.^.^...^.^.^.^...^.^.^.^.^.^.^.^...^...^.^.^...^.^...^.^.^.^...........^.^.^...................
.............................................................................................................................................
..................^.^.^.^...^...^.^.^.......^.^...^.^...^...^...^.^...^.^.....^.^...^...^.^.^.^.^.^...^.^.^.^...^...^.^.^.^..................
.............................................................................................................................................
.................^.^...^.^.^.^.^.^.^.^.^.......^.^.^.^.^.^.^...^.^.^.^.....^.^.^.^.....^.^.^.^.^...^.^...^.^.^...^.^...^.^.^.................
.............................................................................................................................................
................^...^.^...^.^.^.^.^.....^.^.^.^.....^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.....^.^.^.....^.....^.^.^...^.^.^.^.^................
.............................................................................................................................................
...............^...^.^.^.^.^.^.^.....^...^.^...^...^.^.....^.^.^.^.^.^.^.^...^...^...^.^.^.^...^.^...^.^...^.^.^.^.^.^.^.^.^.^...............
.............................................................................................................................................
..............^.^.^.....^.^.^.^.^.^.^.^.^.^.^.^...^.^.....^.^.^.^.....^.^.^...^.^.^.^.^.^.^...^.^.^.^.....^.^.^...^...^.^.^.^.^..............
.............................................................................................................................................
.............^.^.^.^.^.^.^...^.^...^.^.^...^.^.^.^...^.^.^.^.^.^...^.^.^.....^.......^.^.^...^.^...^.^.^.^.^.^.^.^.....^.^.^.^.^.............
.............................................................................................................................................
............^.^.^.^.^.^.^.....^.^.^.^...^.^.....^.....^.^...^.^.^.^.^.^.^...^.^...^.^.......^.^.^.^.^...^.......^.^.....^.^.^...^............
.............................................................................................................................................
...........^.....^.^...^.^.^.^...^...^...^...^.^...^.^.^...^...^.....^.............^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^...^...^.^.^...........
.............................................................................................................................................
..........^.^.^.^.^...^...^...^.^.^.^.^...^.^.^...^...^.^.^.......^.^.^.^.^.^...^...^.^.^...^...^.......^.^.^.^...^.^...^.^.....^.^..........
.............................................................................................................................................
.........^.^...^.....^.^.^.^.^.^.^.^.^...^.^...^...^.^...^.^.^.^.^...^.^.^.^...^...^.^.^.^.......^.....^.^.^.^.^.....^.^.^.^.^.^.^.^.........
.............................................................................................................................................
........^...^.....^.^.^.^.^...^.^.^.^.^.^...^.^.....^.^.^...^.^.^.^.^.^.^...........^.^.^.^.^.^.^.^.....^.^.^.^.^.^...^.^...^.^.^.^.^........
.............................................................................................................................................
.......^...^.^.^.^.....^.......^.^.^...^.^.^...........^.^.^...^.....^...^.^.^.^...^...^.^.^...^.^.^.^.^.^.^...^.^.^.^.^.^.^.^.^.^.^.^.......
.............................................................................................................................................
......^.^.^...^.^.^.^.^...^.^.^...^.^...^.^.^.^.^...^.^.^.^.^...^...^...^.^.^.^...^.^.^.^.^.^.^...^.^...^.^...^.^.^.......^.^.^...^.^.^......
.............................................................................................................................................
.....^.^.....^.^...^.^.^.^.^.^.^.^.^...^.....^.^.^.^...^.^.^.^.^.^.^...^.^...^.^.^.^...^...^.^.^.^...^.....^...^.^.^.^...^...^...^.^.^.^.....
.............................................................................................................................................
....^...^.^.^.^.^.....^.....^.^.^.^.^.^.....^.^.^.^.^.^.^.......^.^.^.^.^.^.^.^.^.^.^...^...^...^.^.^.....^.^.^...^.^.....^.^.^.^.^.^...^....
.............................................................................................................................................
...^.^.^.^.^.^.^.^...^.....^.^.^.^.^.^.^.^.^.^...^.^...^.^.^.^.^.^.^...^.^...^.^...^...^.....^...^...^.^.^.....^.^.^.^.^.^...^.^.^...^.^.^...
.............................................................................................................................................
..^.^.^...^.^...^...^.^...^.^.^.^.......^...^.....^.^.^.^.^.^.^.^...^.^.......^...^.^.^.^.^...^...^...^.^.^.^...^.^...^.^...^.^...^.^.....^..
.............................................................................................................................................
.^.^...^.^...^.^.^.^.^.^.^.......^.^...^...^.^...^.^.^.^...^.^...^.^.^.^.^.^.^.^.^.^.^...^.......^...^.^...^.^.^.^.^.^.^...........^.^.^.^.^.
.............................................................................................................................................`;
const request = { body: input }

describe("laboratories", () => {
    test('should correctly calculate grand total', async () => {
        const result = await countSplits(request);
        expect(result).toBe(21);
    })
    test('should correctly calculate real input', async () => {
        const result = await countSplits({ body: realInput });
        expect(result).toBe(1651);
    })
});